{% extends 'base.html' %}

{% block title %}Wishlist - Trading Platform{% endblock %}

{% block extra_css %}
<style>
    :root {
        --primary-color: #2a2d3e;
        --secondary-color: #1f2130;
        --accent-color: #00c7ff;
        --text-color: #ffffff;
        --positive-color: #4CAF50;
        --negative-color: #f44336;
    }

    .trading-container {
        max-width: 1200px;
        margin: 20px auto;
        padding: 20px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .top-pairs {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .pair-box {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        transition: transform 0.2s;
    }

    .pair-box:hover {
        transform: translateY(-2px);
    }

    .pair-box span {
        display: block;
    }

    .pair-box .price {
        color: #2196F3;
        font-weight: bold;
        font-size: 1.2em;
        margin-top: 5px;
    }

    .search-bar {
        position: relative;
        margin-bottom: 20px;
    }

    .search-bar input {
        width: 100%;
        padding: 12px 40px 12px 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 14px;
        transition: border-color 0.3s;
    }

    .search-bar input:focus {
        border-color: var(--accent-color);
        outline: none;
    }

    .search-bar i {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: #666;
    }

    .tabs {
        display: flex;
        gap: 20px;
        margin-bottom: 30px;
        border-bottom: 1px solid #eee;
        padding-bottom: 10px;
    }

    .tab {
        padding: 10px 20px;
        border: none;
        background: none;
        cursor: pointer;
        font-weight: 500;
        color: #666;
        transition: all 0.3s;
    }

    .tab.active {
        color: var(--accent-color);
        border-bottom: 2px solid var(--accent-color);
    }

    .pairs-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .pair-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-radius: 8px;
        background: #fff;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        transition: transform 0.2s;
        position: relative;
    }

    .pair-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .symbol {
        font-weight: bold;
        font-size: 1.1em;
        min-width: 100px;
    }

    .values {
        text-align: right;
    }

    .main-value {
        font-weight: bold;
        font-size: 1.1em;
    }

    .change {
        font-size: 0.9em;
        margin-top: 5px;
    }

    .change.positive {
        color: var(--positive-color);
    }

    .change.negative {
        color: var(--negative-color);
    }

    .hl-values {
        display: flex;
        gap: 20px;
        color: #666;
        font-size: 0.9em;
    }

    .pair-actions {
        display: none;
        gap: 10px;
        position: absolute;
        right: 20px;
        top: 50%;
        transform: translateY(-50%);
    }

    .pair-item:hover .pair-actions {
        display: flex;
    }

    .action-button {
        padding: 8px 15px;
        border: none;
        border-radius: 6px;
        color: white;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .buy-button {
        background: var(--positive-color);
    }

    .sell-button {
        background: var(--negative-color);
    }

    .delete-button {
        background: #666;
    }

    .action-button:hover {
        opacity: 0.9;
        transform: scale(1.05);
    }

    .market-categories {
        display: none;
        background: #fff;
        border-radius: 8px;
        overflow: hidden;
    }

    .market-category {
        border-bottom: 1px solid #eee;
    }

    .category-header {
        padding: 15px 20px;
        background: #f8f9fa;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .category-header span {
        font-weight: 500;
    }

    .category-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
    }

    .category-content.active {
        max-height: 500px;
    }

    .symbol-item {
        padding: 12px 20px;
        cursor: pointer;
        transition: background 0.3s;
    }

    .symbol-item:hover {
        background: #f8f9fa;
    }

    @media (max-width: 768px) {
        .pair-item {
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
        }

        .pair-actions {
            position: static;
            transform: none;
            margin-top: 10px;
            display: flex;
        }

        .hl-values {
            width: 100%;
            justify-content: space-between;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="trading-container">
    <div class="top-pairs">
        <div class="pair-box">
            <span>EURUSD</span>
            <span class="price">$ 1.13795</span>
        </div>
        <div class="pair-box">
            <span>XAUUSD</span>
            <span class="price">$ 3294.69</span>
        </div>
        <div class="pair-box">
            <span>BTCUSD</span>
            <span class="price">$ 83458.62</span>
        </div>
    </div>

    <div class="search-bar">
        <input type="text" placeholder="Search eg: EUR/USD, BTC">
        <i class="fas fa-search"></i>
    </div>

    <div class="tabs">
        <button class="tab active">FAVORITES</button>
        <button class="tab">ALL SYMBOLS</button>
    </div>

    <div class="pairs-list">
        <!-- Pairs will be dynamically added here -->
    </div>

    <div class="market-categories">
        <!-- Market categories will be dynamically added here -->
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initial data for pairs
        const pairsData = [
            { symbol: 'EURUSD', price: 1.13795, change: 0.76, low: 1.12927, high: 1.13854 },
            { symbol: 'GBPUSD', price: 1.32742, change: 0.33, low: 1.32742, high: 1.32902 },
            { symbol: 'USDCAD', price: 1.39241, change: -0.24, low: 1.39133, high: 1.39599 },
            { symbol: 'BTCUSD', price: 83458.62, change: -0.15, low: 83044.38, high: 83892.32 }
        ];

        const pairsList = document.querySelector('.pairs-list');
        
        // Function to create pair items
        function createPairItem(pair) {
            return `
                <div class="pair-item">
                    <div class="symbol">${pair.symbol}</div>
                    <div class="values">
                        <div class="main-value">${pair.price.toFixed(5)}</div>
                        <div class="change ${pair.change >= 0 ? 'positive' : 'negative'}">
                            ${pair.change}% ${pair.change >= 0 ? '↑' : '↓'}
                        </div>
                    </div>
                    <div class="hl-values">
                        <div>L: ${pair.low}</div>
                        <div>H: ${pair.high}</div>
                    </div>
                    <div class="pair-actions">
                        <button class="action-button buy-button">
                            <i class="fas fa-arrow-up"></i> Buy
                        </button>
                        <button class="action-button sell-button">
                            <i class="fas fa-arrow-down"></i> Sell
                        </button>
                        <button class="action-button delete-button">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `;
        }

        // Initialize pairs list
        pairsData.forEach(pair => {
            pairsList.innerHTML += createPairItem(pair);
        });

        // Search functionality
        const searchInput = document.querySelector('.search-bar input');
        searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const pairItems = document.querySelectorAll('.pair-item');
            
            pairItems.forEach(item => {
                const symbol = item.querySelector('.symbol').textContent.toLowerCase();
                item.style.display = symbol.includes(searchTerm) ? 'flex' : 'none';
            });
        });

        // Tab switching
        const tabs = document.querySelectorAll('.tab');
        const marketCategories = document.querySelector('.market-categories');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                tabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');

                if (this.textContent === 'ALL SYMBOLS') {
                    pairsList.style.display = 'none';
                    marketCategories.style.display = 'block';
                } else {
                    pairsList.style.display = 'flex';
                    marketCategories.style.display = 'none';
                }
            });
        });

        // Auto-update prices
        setInterval(() => {
            const pairItems = document.querySelectorAll('.pair-item');
            pairItems.forEach(item => {
                const mainValue = item.querySelector('.main-value');
                const currentValue = parseFloat(mainValue.textContent);
                const change = (Math.random() - 0.5) * 0.001;
                const newValue = (currentValue + change).toFixed(5);
                mainValue.textContent = newValue;
                
                const changeElement = item.querySelector('.change');
                const changeValue = (change * 100).toFixed(2);
                changeElement.textContent = `${changeValue}% ${change >= 0 ? '↑' : '↓'}`;
                changeElement.className = `change ${change >= 0 ? 'positive' : 'negative'}`;
            });
        }, 3000);

        // Action buttons handlers
        document.addEventListener('click', function(e) {
            if (e.target.closest('.action-button')) {
                const button = e.target.closest('.action-button');
                const pairItem = button.closest('.pair-item');
                const symbol = pairItem.querySelector('.symbol').textContent;
                
                if (button.classList.contains('buy-button')) {
                    alert(`Buying ${symbol}`);
                } else if (button.classList.contains('sell-button')) {
                    alert(`Selling ${symbol}`);
                } else if (button.classList.contains('delete-button')) {
                    if (confirm(`Remove ${symbol} from wishlist?`)) {
                        pairItem.remove();
                    }
                }
            }
        });
    });
</script>
{% endblock %}

