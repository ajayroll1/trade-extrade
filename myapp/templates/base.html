<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Trading Platform{% endblock %}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    {% block extra_css %}{% endblock %}
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow: hidden; /* Prevent double scrollbars */
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }

        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px; /* Adjust as needed */
            z-index: 1001;
            background: #fff; /* Add your desired background color */
        }

        main {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="overlay" id="overlay"></div>
    
    <header>
        <div class="menu-btn" id="menuBtn">
            <i class="fas fa-bars"></i>
        </div>
    </header>

    <div class="sidebar" id="sidebar">
        <nav>
            <ul>
                <li>
                    <a href="{% url 'dashboard' %}">
                        <i class="fas fa-chart-line"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'wishlist' %}">
                        <i class="fas fa-briefcase"></i>
                        <span>Wishlist</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'trades' %}">
                        <i class="fas fa-exchange-alt"></i>
                        <span>Trades</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'analytics' %}">
                        <i class="fas fa-chart-bar"></i>
                        <span>Analytics</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'signal' %}">
                        <i class="fas fa-bullhorn"></i>
                        <span>Signals</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'pamm' %}">
                        <i class="fas fa-users-cog"></i>
                        <span>Pamm</span>
                    </a>
                </li>
                <li>
                    <a href="{% url 'history' %}">
                        <i class="fas fa-history"></i>
                        <span>History</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="handleLogout(event)">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <main>
        {% block content %}{% endblock %}
    </main>

    <script src="{% static 'js/script.js' %}"></script>
    {% block extra_js %}{% endblock %}
    <script>
    function handleLogout(event) {
        event.preventDefault();
        
        // Create a form to submit POST request with CSRF token
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = "{% url 'logout' %}";
        
        // Add CSRF token
        const csrfToken = document.createElement('input');
        csrfToken.type = 'hidden';
        csrfToken.name = 'csrfmiddlewaretoken';
        csrfToken.value = '{{ csrf_token }}';
        form.appendChild(csrfToken);
        
        // Show confirmation dialog
        if (confirm('Are you sure you want to logout?')) {
            document.body.appendChild(form);
            form.submit();
        }
    }
    </script>
</body>
</html>

